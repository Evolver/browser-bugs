<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">
<head>
  <title>Flash bug test</title>
  <script type="text/javascript">
  //<![CDATA[
    function debug( message) {
      document.getElementById( 'debug').innerHTML +=message +'<br />';
    }
  //]]>
  </script>
</head>
<body>
  <div id="debug">
    Click (maybe twice) on a RED square to open dialog box.<br />
    Then wait until the RED square will be removed from DOM.<br />
    If the timer stops when you open dialog box - PASS. Otherwise, wait...<br />
    <br />
  </div>

  <div id="status"></div>
  
  <div id="test" style="border: solid 1px red;display:block;width:200px;height:200px;">
    <object id="SWFUpload_0" type="application/x-shockwave-flash" data="swfupload.swf" width="200px" height="200px" class="swfupload">
      <param name="wmode" value="transparent" />
      <param name="movie" value="swfupload.swf" />
      <param name="quality" value="high" />
      <param name="menu" value="false" />
      <param name="allowScriptAccess" value="always" />
      <param name="flashvars" value="movieName=SWFUpload_0&amp;uploadURL=http%3A%2F%2Fwww.tvnet.lv%2F&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=200%2C201%2C202&amp;assumeSuccessTimeout=0&amp;params=a%3Db&amp;filePostName=background&amp;fileTypes=*.jpg%3B*.gif%3B*.png&amp;fileTypesDescription=Images&amp;fileSizeLimit=0&amp;fileUploadLimit=0&amp;fileQueueLimit=1&amp;debugEnabled=false&amp;buttonImageURL=&amp;buttonWidth=200&amp;buttonHeight=200&amp;buttonText=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-100&amp;buttonDisabled=false&amp;buttonCursor=-2" />
    </object>
  </div>
  <br />
  <div id="test2" style="border: solid 1px green;display:block;width:200px;height:200px;">
    <object id="SWFUpload_1" type="application/x-shockwave-flash" data="swfupload.swf" width="200px" height="200px" class="swfupload">
      <param name="wmode" value="transparent" />
      <param name="movie" value="swfupload.swf" />
      <param name="quality" value="high" />
      <param name="menu" value="false" />
      <param name="allowScriptAccess" value="always" />
      <param name="flashvars" value="movieName=SWFUpload_0&amp;uploadURL=http%3A%2F%2Fwww.tvnet.lv%2F&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=200%2C201%2C202&amp;assumeSuccessTimeout=0&amp;params=a%3Db&amp;filePostName=background&amp;fileTypes=*.jpg%3B*.gif%3B*.png&amp;fileTypesDescription=Images&amp;fileSizeLimit=0&amp;fileUploadLimit=0&amp;fileQueueLimit=1&amp;debugEnabled=false&amp;buttonImageURL=&amp;buttonWidth=200&amp;buttonHeight=200&amp;buttonText=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-100&amp;buttonDisabled=false&amp;buttonCursor=-2" />
    </object>
  </div>

  <script type="text/javascript">
  //<![CDATA[
    var interval, counter =5;
    
    interval =setInterval(function(){
      if( counter ==0) {
        debug( 'Removing, please wait...')
        // remove flash
        var test =document.getElementById( 'test');
        test.parentNode.removeChild( test);
        
        debug( 'Removed, now close the dialog.');
        debug( 'If browser crashes - FAIL. If not - PASS. If dialog box disappeared before you closed it - PASS.');
        debug( '');
        debug( 'If you survived till this message, and your browser does not say that Adobe Flash plugin has crashes, click the GREEN square.');
        debug( 'If Flash crashed - FAIL. If dialog box does not pop up - FAIL. If dialog box popped up - PASS.');
      
        clearInterval(interval);
        
      } else {
        debug( 'Removing OBJECT element after ' +(counter--) +' sec.');
      }
    }, 1000);
  //]]>
  </script>

</body>
</html>